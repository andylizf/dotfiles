name: dotfiles

resources:
  cloud: gcp
  disk_size: 50

file_mounts:
  # Mount the setup script
  /tmp/setup.sh: ./skypilot/setup.sh
  # Mount sops decryption key
  ~/.config/sops/age/keys.txt: ~/.config/sops/age/keys.txt

envs:
  DOTFILES_REPO: https://github.com/andylizf/dotfiles.git
  HM_CONFIG: gcpuser-linux

setup: |
  # Execute the mounted setup script
  bash /tmp/setup.sh

run: |
  # Simple verification
  echo "System ready. Run 'fish' to use fish shell."